# CellProfiler-Extractors


## Overview

All extractors here use **CellProfiler** to run CellProfiler's sample pipelines on the contents of ZIP files. **Important: You will need Python and CellProfiler to be installed in your system PATH**.

These extractors were developed and tested on **Windows 7** with **Cellprofiler 2.0 r11710**. These extractors should work with any platform where Cellprofiler can be called headless from the command line/terminal/prompt.

Information on Cellprofiler can be found on the [project's website](http://cellprofiler.org). Download it [here](http://cellprofiler.org/previousReleases.shtml) (release version 2.0.11710).

Each extractor needs a specific sample pipeline that can be found [here](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/) (SVN trunk for revision 11761), or more specifically:

* Fluorescent Comet Assay Extractor:[ExampleFluorescentCometAssay.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleCometAssay/ExampleFluorescentCometAssay.cp)
* Fruit Fly Cell Extractor:[ExampleFly.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleFlyImages/ExampleFly.cp)
* Human HT29 Cell Extractor:[ExampleHuman.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleHumanImages/ExampleHuman.cp)
* Object Tracking Extractor:[ExampleTrackObjects.cp (SVNRevision:11710)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleTrackObjects/ExampleTrackObjects.cp)
* Silver Comet Stain Assey Extractor:[ExampleSilverStainCometAssay.cp (SVNRevision:10997)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleCometAssay/ExampleSilverStainCometAssay.cp)
* Speckle Counting Extractor:[ExampleSpeckles.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleSpecklesImages/ExampleSpeckles.cp)
* Tumor Extractor:[ExampleTumors.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleTumorImages/ExampleTumors.cp)
* Yeast Colonies Extractor:[ExampleYeastColonies_BT.cp (SVNRevision:10415)](https://svn.broadinstitute.org/CellProfiler/trunk/ExampleImages/ExampleYeastColonies_BT_Images/ExampleYeastColonies_BT.cp)

**Important: The pipeline file (.cp file above) for the chosen extractor need to be saved in the same folder as the extractor file (.py file)**

More information on the CellProfiler [Sample Pipelines](http://cellprofiler.org/examples.shtml) website.

To use this extractor you will need pymedici installed. You can either install it, or you can create a link to the pymedici repository. Assuming that the pymedici repository is cloned in the same folder as this repository you can execute the following code `ln -s $(cd "../../pyMedici/pymedici" && pwd -P) pymedici`.

In config.py you will need to set the URL to point to rabbitmq (https://www.rabbitmq.com/uri-spec.html). For example to connect to rabbitmq running on the localhost with default parameters you can use the following URL: amqp://guest:guest@localhost:5672/%2f

## Input
All cellprofiler extractors receive one single ZIP file as input. The contents of the ZIP file depend on the extractor:

* Fluorescent Comet Assay Extractor: one single ".tif" file
* Fruit Fly Cell Extractor: three files with names ending on "D.TIF", "F.TIF", "R.TIF" 
* Human HT29 Cell Extractor: three files with names ending on "d0.tif", "d1.tif", "d2.tif" 
* Object Tracking Extractor: a series files in the format "XXXX_GFPHistone_#.tif", where # is a number and XXXX is any desired prefix common to all images
* Silver Comet Stain Assey Extractor: one single ".jpg" named "comet 1 (Glez).jpg"
* Speckle Counting Extractor: two images, the nuclei stain image name containing the word "hoe" and the histone foci stain image name containing the word "h2ax" 
* Tumor Extractor: two ".jpg" images, the tumors stain image name ending in "f.jpg" and the mouse lung image in "b.jpg"
* Yeast Colonies Extractor: two images, the yeast picture named "6-1.jpg" and a template of the yeast plate named "PlateTemplate.png". 

More information on the desired input files and the pipeline that will be executed can be found on the specific ".cp" files and on the CellProfiler [Sample Pipelines](http://cellprofiler.org/examples.shtml) website.

## Output
Outputs vary depending on the extractor. Any files generated by the extractor will be associated with the same dataset as the contents of the input ZIP file.
